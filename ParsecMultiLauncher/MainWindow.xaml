<Window x:Class="ParsecMultiLauncher.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:ParsecMultiLauncher.ViewModels"
        Title="Parsec Multi-Launcher" Height="300" Width="340"
        WindowStartupLocation="CenterScreen" ResizeMode="NoResize"
        Background="#1E1E1E">
    <Window.DataContext>
        <vm:MainViewModel />
    </Window.DataContext>
    <Window.Resources>
        <!-- Flat button: no hover, no effects -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="#333" />
            <Setter Property="Foreground" Value="#DDD" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="12,6" />
            <Setter Property="FontSize" Value="12" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Flat list item: no hover, no selection highlight -->
        <Style TargetType="ListViewItem">
            <Setter Property="Foreground" Value="#DDD" />
            <Setter Property="FontSize" Value="12" />
            <Setter Property="Padding" Value="2" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListViewItem">
                        <Border Background="Transparent" Padding="{TemplateBinding Padding}">
                            <GridViewRowPresenter />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Flat column header -->
        <Style TargetType="GridViewColumnHeader">
            <Setter Property="Background" Value="#2D2D2D" />
            <Setter Property="Foreground" Value="#999" />
            <Setter Property="FontSize" Value="11" />
            <Setter Property="Padding" Value="4,3" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GridViewColumnHeader">
                        <Border Background="{TemplateBinding Background}"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <DockPanel Margin="8">
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="0,0,0,8">
            <Button Content="Launch Instance" Command="{Binding LaunchCommand}" />
            <Button Content="Kill All" Command="{Binding KillAllCommand}" Margin="6,0,0,0" />
            <TextBlock VerticalAlignment="Center" Margin="10,0,0,0"
                       FontSize="11" Foreground="#888"
                       Text="{Binding Instances.Count, StringFormat='Running: {0}'}" />
        </StackPanel>

        <ListView ItemsSource="{Binding Instances}"
                  Background="#252525" Foreground="#DDD" BorderBrush="#3A3A3A"
                  BorderThickness="1" FontSize="12"
                  FocusVisualStyle="{x:Null}" Focusable="False">
            <ListView.Template>
                <ControlTemplate TargetType="ListView">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <ScrollViewer Focusable="False">
                            <ItemsPresenter />
                        </ScrollViewer>
                    </Border>
                </ControlTemplate>
            </ListView.Template>
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="#" Width="35"
                                    DisplayMemberBinding="{Binding Number}" />
                    <GridViewColumn Header="Status" Width="65"
                                    DisplayMemberBinding="{Binding Status}" />
                    <GridViewColumn Header="PID" Width="55"
                                    DisplayMemberBinding="{Binding Pid}" />
                    <GridViewColumn Header="" Width="50">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Kill"
                                        Command="{Binding DataContext.KillCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                        CommandParameter="{Binding}"
                                        Padding="6,2" FontSize="10"
                                        Background="#FF5722" Foreground="White" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
    </DockPanel>
</Window>
